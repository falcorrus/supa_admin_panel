# Инструкция по подключению клиента к Supabase

## Создание необходимой RPC функции

Для корректной работы административной панели необходимо создать специальную RPC функцию в вашей базе данных Supabase, которая будет использоваться для получения списка таблиц.

### Шаги для создания функции:

1. Войдите в ваш [Supabase Dashboard](https://supabase.com/dashboard)
2. Выберите ваш проект
3. Перейдите в раздел **SQL Editor** (находится в левой боковой панели)
4. Создайте новый запрос или используйте существующий терминал
5. Выполните следующий SQL-код:

```sql
create or replace function get_user_tables()
returns table (table_name text) as $$
begin
  return query
  select t.table_name::text
  from information_schema.tables t
  where t.table_schema = 'public'
    and t.table_type = 'BASE TABLE'
    and not t.table_name like 'pg_%'
    and not t.table_name like 'sql_%'
  order by t.table_name;
end;
$$ language plpgsql;
```

### Назначение функции:

- Функция `get_user_tables()` безопасно возвращает список таблиц из схемы `public`
- Она исключает системные таблицы (те, что начинаются с `pg_` или `sql_`)
- Используется приложением для получения списка таблиц вместо прямого обращения к `information_schema`
- Обеспечивает безопасность, так как не требует предоставления сервисного ключа клиенту

### Проверка работы функции:

После создания функции вы можете проверить её работу, выполнив:

```sql
SELECT * FROM get_user_tables();
```

Если функция возвращает список ваших таблиц, то всё настроено правильно.

## Дополнительная информация

После создания этой функции приложение сможет использовать безопасный метод получения списка таблиц через RPC вызов, что является рекомендуемым подходом для production-окружений.